<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="pragma" content="no-cache">
  <meta http-equiv="cache-control" content="no-cache">
  <meta http-equiv="expires" content="0">
  
  <title>Hello 橙子</title>
  <meta name="author" content="John Doe">
  
  <meta name="description" content="我就是故意拼错的">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="Hello 橙子"/>

  
    <meta property="og:image" content=""/>
  

  
  
    <link href="/favicon.png" rel="icon">
  
  
  <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  



</head>

 <body>  
  <nav id="main-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
		<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
	  <a class="navbar-brand" href="/">Hello 橙子</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="All the articles.">
			  <i class=""></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/categories" title="All the categories.">
			  <i class=""></i>Categories
			</a>
		  </li>
		  
		  <li>
			<a href="/tags" title="All the tags.">
			  <i class=""></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/about" title="About me.">
			  <i class=""></i>About
			</a>
		  </li>
		  
		  <li>
			<a href="/atom.xml" title="Subscribe me.">
			  <i class=""></i>RSS
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 <div class="page-header logo">
  <h1>Hello 橙子<span class="blink-fast">∎</span></h1>
</div>

<div class="row page">

	
	<div class="col-md-9">
	

		<div class="slogan">
      <i class="fa fa-heart blink-slow"></i>
      好好学习，天天向上.
</div>    
		<div id="top_search"></div>
		<div class="mypage">
		
		<!-- title and entry -->
		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-8">
		<h3 class="title">
			<a href="/2018/06/07/fission二次测试以及组件日志分析/" >fission二次测试以及组件日志分析</a>
		</h3>
		</div>
	<div class="col-md-4">
		<div class="date">post @ 2018-06-07  </div>
		</div>
	</div>
	


			<div class="entry">
  <div class="row">
	
	
		<p>对fission进行测试分析组件日志：</p>
<h3 id="进行测试如下："><a href="#进行测试如下：" class="headerlink" title="进行测试如下："></a>进行测试如下：</h3><ol>
<li>创建语言环境镜像、给函数创建路由route trigger、上传函数、测试函数、请求函数、查看函数日志</li>
<li>编译多个文件组成的源码函数：对源码进行打包上传，根据压缩包创建函数、创建路由、通过fission进行解释或编译链接、查看bulid日志</li>
<li>编译artifacts（已打包函数），创建函数、创建路由、测试函数、查看全部函数</li>
<li>创建语言环境镜像、创建builder、查看环境</li>
<li>自动扩容（需要未安装工具hey）</li>
<li>创建trigger：包括http trigger，time trigger，message queue trigger</li>
<li>传源码包：通过fission创建由多个文件组成的函数压缩包，创建package，查看package信息，通过package创建函数</li>
<li>创建部署包：通过fission创建由一个文件组成的函数压缩包，创建package，查看package信息，通过package创建函数</li>
<li>测试函数对k8s中secret和ConfigMaps的访问（demo中的secret路径出现问题，还没找到对的路径）    </li>
<li>fission的workflow测试</li>
</ol>
<h3 id="组件分析如下："><a href="#组件分析如下：" class="headerlink" title="组件分析如下："></a>组件分析如下：</h3><h4 id="builder："><a href="#builder：" class="headerlink" title="builder："></a>builder：</h4><ul>
<li>作用：编译链接上传的源码package</li>
<li>日志包括：记录创建builder service、builder deployment、builder pod、build程序包（注意给build.dh加权限）、上传部署包、更新部署包、build失败报错信息</li>
</ul>
<h4 id="controller："><a href="#controller：" class="headerlink" title="controller："></a>controller：</h4><ul>
<li>作用：每次http请求函数的信息</li>
<li>日志包括：服务器状态，端口，返回http请求的head信息，每次向fission请求时http信息（包括请求错误url的proxy error）如<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1 - - [07/Jun/2018:01:50:33 +0000] &quot;GET /v2/packages/demo-src-pkg-zip-8lwt?namespace=default HTTP/1.1&quot; 404 9</span><br><span class="line">以及（应该是）每次请求的函数地址和传入参数的地址如</span><br><span class="line">github.com/fission/fission/controller.(*API).respondWithError(0xc420082ae0, 0x7f5c883e4e60, 0xc4201a4960, 0x178ea60, 0xc420510b40)</span><br><span class="line">	/Volumes/MacintoshHD/Dropbox/Dropbox/goWorkspace/src/github.com/fission/fission/controller/api.go:98 +0x29</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="executor："><a href="#executor：" class="headerlink" title="executor："></a>executor：</h4><ul>
<li>作用：创建函数</li>
<li>日志包括：检查是缓冲中跑起来的函数，没有找到的话创建一个，为函数分配环境，设置一个数据结构记录函数信息（如函数名，GenerateName:命名空间；SelfLink，Generation；创建时间戳，删除时间戳，存活时间（DeletionGracePeriodSeconds），标签，实例化url），从pool中得到这个函数，选择pod，通过pod ip实例化pod，从pool中找到可以实例化的pod，对函数和pod进行映射，对pod加上标签，选择pod，调用fetcher 拷贝函数到指定url上，实例化pod，用环境镜像实例化pod，为pod加上ip，创建对应语言的pool，拉取fetcher镜像等。</li>
</ul>
<h4 id="kubewatcher："><a href="#kubewatcher：" class="headerlink" title="kubewatcher："></a>kubewatcher：</h4><p>没有查到日志</p>
<h4 id="router："><a href="#router：" class="headerlink" title="router："></a>router：</h4><ul>
<li>作用：对http请求进行转发</li>
<li>日志包括：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">2018/06/07 05:47:12 Calling getServiceForFunction for function: hello</span><br><span class="line">2018/06/07 05:47:30 Tapped 1 services in batch</span><br><span class="line">2018/06/07 05:47:30 Tapped 1 services in batch</span><br><span class="line">2018/06/07 05:48:00 Tapped 1 services in batch</span><br><span class="line">2018/06/07 05:48:00 Tapped 1 services in batch</span><br><span class="line">2018/06/07 05:48:15 Tapped 1 services in batch</span><br><span class="line">2018/06/07 05:48:15 Tapped 1 services in batch</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="storagesvc："><a href="#storagesvc：" class="headerlink" title="storagesvc："></a>storagesvc：</h4><ul>
<li>作用：储存服务</li>
<li>日志包括：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">time=&quot;2018-06-06T07:24:53Z&quot; level=info msg=&quot;Storage service started&quot;</span><br><span class="line">time=&quot;2018-06-06T07:24:53Z&quot; level=info msg=&quot;listening to archiveChannel to prune archives&quot;</span><br><span class="line">time=&quot;2018-06-06T08:24:53Z&quot; level=info msg=&quot;getting orphan archives&quot;</span><br><span class="line">time=&quot;2018-06-06T09:24:53Z&quot; level=info msg=&quot;getting orphan archives&quot;</span><br><span class="line">time=&quot;2018-06-06T09:32:41Z&quot; level=info msg=&quot;Handling upload for /packages/demo-src-pkg-zip-fbza-o3s5sk-icbzii.zip&quot;</span><br><span class="line">172.16.76.86 - - [06/Jun/2018:09:32:41 +0000] &quot;POST /v1/archive HTTP/1.1&quot; 200 72</span><br><span class="line">172.16.76.115 - - [06/Jun/2018:09:40:01 +0000] &quot;GET /v1/archive?id=%2Ffission%2Ffission-functions%2Fde313c06-247e-44a5-83a6-0d257d224212 HTTP/1.1&quot; 200 103852</span><br><span class="line">time=&quot;2018-06-06T10:24:53Z&quot; level=info msg=&quot;getting orphan archives&quot;</span><br><span class="line">time=&quot;2018-06-07T01:50:32Z&quot; level=info msg=&quot;Handling upload for /packages/demo-src-pkg-zip-d20x-rnhpna-i8fmoq.zip&quot;</span><br><span class="line">172.16.76.95 - - [07/Jun/2018:01:50:32 +0000] &quot;POST /v1/archive HTTP/1.1&quot; 200 72</span><br><span class="line">time=&quot;2018-06-07T02:24:53Z&quot; level=info msg=&quot;getting orphan archives&quot;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="timer："><a href="#timer：" class="headerlink" title="timer："></a>timer：</h4><ul>
<li>作用：一个基于时间的triggers，定时向请求指定函数。这里是每30s请求一次。</li>
<li>日志包括：<br>2018/06/07 08:17:30 Making HTTP request to <a href="http://router.fission/fission-function/hello" target="_blank" rel="noopener">http://router.fission/fission-function/hello</a><br>主要是记录时间</li>
</ul>

	
	</div>
  <a type="button" href="/2018/06/07/fission二次测试以及组件日志分析/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-8">
		<h3 class="title">
			<a href="/2018/06/01/SqueezeNet介绍/" >SqueezeNet介绍</a>
		</h3>
		</div>
	<div class="col-md-4">
		<div class="date">post @ 2018-06-01  </div>
		</div>
	</div>
	


			<div class="entry">
  <div class="row">
	
	
		<h3 id="定义："><a href="#定义：" class="headerlink" title="定义："></a>定义：</h3><p>压缩神经网络参数——轻量化网络<br>SqueezeNet是一个小型化的网络模型结构，在保证不降低检测精度的同时，用了比AlexNet少50倍的参数。</p>
<p>同时采用了deep compression技术，对squeezenet进行了压缩，将原始AlexNet模型压缩至原来的1/500（模型文件&lt; 0.5MB,原始AlexNet模型约为200MB，同时增大了计算量。</p>
<h3 id="措施："><a href="#措施：" class="headerlink" title="措施："></a>措施：</h3><ol>
<li>将一部分3x3的filter（卷集核）替换成1x1的filter；<br>本文替换3x3的卷积kernel为1x1的卷积kernel可以让参数缩小9X。但是为了不影响识别精度，并不是全部替换，而是一部分用3x3，一部分用1x1。</li>
<li>减少输入的channels（3x3卷积核的input feature map数量，输入通道数）；<br>如果是conv1-conv2这样的直连，那么实际上是没有办法减少conv2的input feature map数量的。因此把一层conv分解为两层，封装为一个Fire Module。使用squeeze layers来实现。</li>
<li>在整个网络后期才进行下采样，使得卷积层有比较大的activation maps；<br>分辨率越大的特征图（延迟降采样）可以带来更高的分类精度，因为分辨率越大的输入能够提供的信息就越多。将欠采样操作延后，可以给卷积层提供更大的激活图：更大的激活图保留了更多的信息，可以提供更高的分类准确率。</li>
</ol>
<p>其中：措施1、2可降低参数数量。措施3用来大化网络精度。</p>
<h3 id="fire-module："><a href="#fire-module：" class="headerlink" title="fire module："></a>fire module：</h3><p>一个类似inception的网络单元结构。SqueezeNet的网络结构由若干个 fire module 组成。<br>将原来一层conv层变成两层：squeeze卷集层（有1x1卷集核）+expand卷集层（1x1和3x3卷积核）。</p>
<ol>
<li>策略1：squeeze层用1x1的卷集filter。squeeze层借鉴了inception的思想，利用1x1卷积核来降低输入到expand层中3x3卷积核的输入通道数channels。</li>
<li>策略2:  定义squeeze层中1x1卷积核的数量是s1x1，expand层中1x1卷积核的数量是e1x1， 3x3卷积核的数量是e3x3。令s1x1 &lt; e1x1+ e3x3从而保证输入到3x3的输入通道数减小，这样squeeze layer可以限制输入通道数量。<br>激活函数：为了保证1x1卷积核和3x3卷积核具有相同大小的输出，3x3卷积核采用1像素的zero-padding和步长 squeeze层和expand层均采用RELU作为激活函数 。</li>
</ol>
<p>Fire module输入的feature map为H<em>W</em>M的，输出的feature map为H<em>M</em>(e1+e3)，可以看到feature map的分辨率是不变的，变的仅是维数，也就是通道数，这一点和VGG的思想一致。<br>首先，H<em>W</em>M的feature map经过Squeeze层，得到S1个feature map，这里的S1均是小于M的，以达到“压缩”的目的。<br>其次，H<em>W</em>S1的特征图输入到Expand层，分别经过1<em>1卷积层和3</em>3卷积层进行卷积，再将结果进行concat，得到Fire module的输出，为 H<em>M</em>(e1+e3)的feature map。<br>fire模块有三个可调参数：S1，e1，e3，分别代表卷积核的个数，同时也表示对应输出feature map的维数，在本文提出的SqueezeNet结构中，e1=e3=4s1</p>
<h3 id="模型："><a href="#模型：" class="headerlink" title="模型："></a>模型：</h3><p>SqueezeNet以卷积层（conv1）开始，接着使用8个Fire modules (fire2-9)，最后以卷积层（conv10）结束。每个fire module中的filter数量逐渐增加，并且在conv1, fire4, fire8, 和 conv10这几层之后使用步长为2的max-pooling，即将池化层放在相对靠后的位置，这使用了以上的策略（3）。<br>最后是一个conv10，在fire9后采用50%的dropout 由于全连接层的参数数量巨大，因此借鉴NIN的思想，去除了全连接层FC而改用global average pooling。</p>
<h3 id="减少参数的优点："><a href="#减少参数的优点：" class="headerlink" title="减少参数的优点："></a>减少参数的优点：</h3><p>1、实现更高效的分布式训练；<br>服务器间的通信是分布式CNN训练的重要限制因素。对于分布式 数据并行 训练方式，通信需求和模型参数数量正相关。小模型对通信需求更低。<br>2、训练出轻量级的模型，减小下载模型到客户端的额外开销 ；<br>比如在自动驾驶中，经常需要更新客户端模型。更小的模型可以减少通信的额外开销，使得更新更加容易。<br>3、在FPGA和嵌入式硬件上的部署实现；</p>
<h3 id="GitHub项目："><a href="#GitHub项目：" class="headerlink" title="GitHub项目："></a>GitHub项目：</h3><p>SqueezeNet <a href="https://github.com/DeepScale/SqueezeNet" target="_blank" rel="noopener">https://github.com/DeepScale/SqueezeNet</a>  1.4k star<br>SqueezeNet-Deep-Compression： <a href="https://github.com/songhan/SqueezeNet-Deep-Compression" target="_blank" rel="noopener">https://github.com/songhan/SqueezeNet-Deep-Compression</a> 314 star  <a href="https://arxiv.org/abs/1602.07360" target="_blank" rel="noopener">https://arxiv.org/abs/1602.07360</a><br>SqueezeNet-Generator： <a href="https://github.com/songhan/SqueezeNet-Generator" target="_blank" rel="noopener">https://github.com/songhan/SqueezeNet-Generator</a><br>SqueezeNet-DSD-Training： <a href="https://github.com/songhan/SqueezeNet-DSD-Training" target="_blank" rel="noopener">https://github.com/songhan/SqueezeNet-DSD-Training</a><br>SqueezeNet-Residual： <a href="https://github.com/songhan/SqueezeNet-Residual" target="_blank" rel="noopener">https://github.com/songhan/SqueezeNet-Residual</a><br><a href="https://github.com/vonclites/squeezenet" target="_blank" rel="noopener">https://github.com/vonclites/squeezenet</a> 52 star 有原论文 <a href="https://arxiv.org/abs/1602.07360" target="_blank" rel="noopener">https://arxiv.org/abs/1602.07360</a><br><a href="https://github.com/rcmalli/keras-squeezenet" target="_blank" rel="noopener">https://github.com/rcmalli/keras-squeezenet</a>  251 star Keras实现 squeezenet<br><a href="https://github.com/DT42/squeezenet_demo" target="_blank" rel="noopener">https://github.com/DT42/squeezenet_demo</a> 175 star  </p>
<h3 id="相关论文："><a href="#相关论文：" class="headerlink" title="相关论文："></a>相关论文：</h3><p><a href="https://arxiv.org/pdf/1602.07360v3.pdf" target="_blank" rel="noopener">https://arxiv.org/pdf/1602.07360v3.pdf</a> squeezenet用了比AlexNet少50倍的参数，达到了AlexNet相同的精度<br><a href="https://arxiv.org/pdf/1506.02626v3.pdf" target="_blank" rel="noopener">https://arxiv.org/pdf/1506.02626v3.pdf</a> Learning both Weights and Connections for Efficient Neural Network (NIPS’15)<br><a href="https://arxiv.org/pdf/1510.00149v5.pdf" target="_blank" rel="noopener">https://arxiv.org/pdf/1510.00149v5.pdf</a> 深度压缩，用剪枝来压缩深度神经网络，训练量化和 Huffman 编码<br><a href="https://arxiv.org/pdf/1602.01528v1.pdf" target="_blank" rel="noopener">https://arxiv.org/pdf/1602.01528v1.pdf</a> 压缩神经网络的Efficient Inference Engine</p>
<h3 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h3><p>squeezenet采用“多层小卷积核”策略，通过增加计算量换来更少的参数，把参数读取的代价转移到计算量上。计算耗时还是要远远小于数据存取耗时的，是“多层小卷积核”策略成功的根源。</p>
<h3 id="其他："><a href="#其他：" class="headerlink" title="其他："></a>其他：</h3><p>mobilenet和，squeezenet都是alexnet参数量1/50，mobilenet速度比alexnet快10倍，squeezenet提升3%</p>

	
	</div>
  <a type="button" href="/2018/06/01/SqueezeNet介绍/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-8">
		<h3 class="title">
			<a href="/2018/06/01/SqueezeNet的ARM和树莓派案例/" >SqueezeNet的ARM和树莓派案例</a>
		</h3>
		</div>
	<div class="col-md-4">
		<div class="date">post @ 2018-06-01  </div>
		</div>
	</div>
	


			<div class="entry">
  <div class="row">
	
	
		<h2 id="ARM"><a href="#ARM" class="headerlink" title="ARM"></a>ARM</h2><ol>
<li>ARM Compute Library案例：</li>
</ol>
<ul>
<li>案例：<br>ARM 计算库（ACL）提供了CNN的基本构造块，比如激活、卷积、全连接和局部连接、规范化、池化和softmax功能. 文章通过这些组件构建SqueezeNet ，并与通过tensorflow构建的SqueezeNet进行比较，</li>
<li>产品化程度：<br>理论性较强，产品化程度不高。重点介绍了如何通过ACL构建SqueezeNet架构的CNN推理机  ，并与通过Zuluko上tensorflow构建的SqueezeNet进行比较。<br>-SqueezeNet 起到的作用：<br>作为用于测试ACL性能的神经网络模型。</li>
<li>链接：<br><a href="https://arxiv.org/pdf/1704.03751.pdf" target="_blank" rel="noopener">https://arxiv.org/pdf/1704.03751.pdf</a> 和<br><a href="https://community.arm.com/iot/embedded/b/embedded-blog/posts/perceptin-enabled-embedded-deep-learning-inference-engine-with-the-arm-compute-library" target="_blank" rel="noopener">https://community.arm.com/iot/embedded/b/embedded-blog/posts/perceptin-enabled-embedded-deep-learning-inference-engine-with-the-arm-compute-library</a></li>
<li>代码：<br>ACL中样例SqueezeNet的C++代码 <a href="https://github.com/ARM-software/ComputeLibrary/blob/master/examples/graph_squeezenet_v1_1.cpp" target="_blank" rel="noopener">https://github.com/ARM-software/ComputeLibrary/blob/master/examples/graph_squeezenet_v1_1.cpp</a></li>
</ul>
<h2 id="Raspberry-Pi-3"><a href="#Raspberry-Pi-3" class="headerlink" title="Raspberry Pi 3"></a>Raspberry Pi 3</h2><ol>
<li>用opencv在树莓派上部署SqueezeNet</li>
</ol>
<ul>
<li>案例：用OpenCV3.3.0在Raspberry Pi 3上部署 pre-trained SqueezeNet Neural Network</li>
<li>产品化程度：<br>比较高，可以输出结果。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">（1）在图像上绘出最高的预测分类标签和相应的概率</span><br><span class="line">（2）将前五个结果和概率打印到终端</span><br><span class="line">（3）将图像显示在屏幕上</span><br><span class="line"></span><br><span class="line">[INFO] loading model...</span><br><span class="line">[INFO] classification took 0.4432 seconds</span><br><span class="line">[INFO] 1. label: drake, probability: 0.25705</span><br><span class="line">[INFO] 2. label: goose, probability: 0.18581</span><br><span class="line">[INFO] 3. label: black stork, probability: 0.10414</span><br><span class="line">[INFO] 4. label: hornbill, probability: 0.074497</span><br><span class="line">[INFO] 5. label: quail, probability: 0.051127</span><br></pre></td></tr></table></figure>
<ul>
<li>SqueezeNet 起到的作用：<br>用于图像识别，在案例中起主要作用。</li>
<li>代码：<a href="https://github.com/appinho/Raspberry_Pi_3_Image_Classification/tree/master/SqueezeNet" target="_blank" rel="noopener">https://github.com/appinho/Raspberry_Pi_3_Image_Classification/tree/master/SqueezeNet</a></li>
</ul>
<ol start="2">
<li>使用Raspberry Pi和预先训练的深度学习神经网络对输入图像进行分类</li>
</ol>
<ul>
<li>案例：使用Raspberry Pi 部署预先训练的深度学习网络.不通过树莓派训练模型，只做用来部署预先训练好的模型</li>
<li>产品化程度：<br>比较高，可以输出具体结果，SqueezeNet比GoogLeNet速度更快，但准确率没它高</li>
<li>SqueezeNet 起到的作用：进行图片分类</li>
<li>链接：<a href="https://www.pyimagesearch.com/2017/10/02/deep-learning-on-the-raspberry-pi-with-opencv/" target="_blank" rel="noopener">https://www.pyimagesearch.com/2017/10/02/deep-learning-on-the-raspberry-pi-with-opencv/</a></li>
<li>代码：<a href="https://www.getdrip.com/forms/353154548/submissions" target="_blank" rel="noopener">https://www.getdrip.com/forms/353154548/submissions</a></li>
</ul>
<ol start="3">
<li>在Raspberry Pi 中运行Movidius Neural Compute Stick</li>
</ol>
<ul>
<li>案例： 通过Raspberry Pi 、Raspbian jessie（2017-07-05）、cheep USB camera和SqueezeNet实现。</li>
<li>产品化程度：高，已实现，有demo视频可以进行实时识别。</li>
<li>SqueezeNet 起到的作用：用于图像分类</li>
<li>链接：<a href="https://www.youtube.com/watch?v=41E5hni786Y" target="_blank" rel="noopener">https://www.youtube.com/watch?v=41E5hni786Y</a> 和 <a href="https://www.youtube.com/watch?v=f39NFuZAj6s" target="_blank" rel="noopener">https://www.youtube.com/watch?v=f39NFuZAj6s</a></li>
</ul>
<ol start="4">
<li>使用Raspberry Pi 3进行目标检测</li>
</ol>
<ul>
<li>案例：使用树莓进行对象检测</li>
<li>产品化程度：不高，理论分析</li>
<li>SqueezeNet 起到的作用：建议使用的神经网络之一</li>
<li>链接：<a href="https://medium.com/dt42/run-object-detection-using-deep-learning-on-raspberry-pi-3-1-55027eac26c3" target="_blank" rel="noopener">https://medium.com/dt42/run-object-detection-using-deep-learning-on-raspberry-pi-3-1-55027eac26c3</a></li>
</ul>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><ol>
<li>通过SqueezeNet进行猫狗识别</li>
</ol>
<ul>
<li>案例：猫狗识别</li>
<li>产品化程度：一般。</li>
<li>SqueezeNet 起到的作用：图像识别</li>
<li>代码：<a href="https://github.com/chasingbob/squeezenet-keras" target="_blank" rel="noopener">https://github.com/chasingbob/squeezenet-keras</a></li>
</ul>
<ol start="2">
<li>MXNet在Raspberry Pi上的实时对象检测</li>
</ol>
<ul>
<li>案例：AWS的loT，MXNet和Raspberry Pi</li>
<li>产品化程度：比较高</li>
<li>SqueezeNet 起到的作用：主要是MXNet</li>
<li>链接：<br><a href="https://mxnet.incubator.apache.org/tutorials/embedded/wine_detector.html" target="_blank" rel="noopener">https://mxnet.incubator.apache.org/tutorials/embedded/wine_detector.html</a></li>
</ul>
<ol start="3">
<li>手机上的Squeezing Deep Learning<br>链接：<a href="https://www.slideshare.net/anirudhkoul/squeezing-deep-learning-into-mobile-phones" target="_blank" rel="noopener">https://www.slideshare.net/anirudhkoul/squeezing-deep-learning-into-mobile-phones</a></li>
</ol>

	
	</div>
  <a type="button" href="/2018/06/01/SqueezeNet的ARM和树莓派案例/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-8">
		<h3 class="title">
			<a href="/2018/05/20/复现activitynet2016未剪辑视频分类冠军算法模型/" >复现activitynet2016未剪辑视频分类冠军算法模型</a>
		</h3>
		</div>
	<div class="col-md-4">
		<div class="date">post @ 2018-05-20  </div>
		</div>
	</div>
	


			<div class="entry">
  <div class="row">
	
	
		<p>复现activitynet2016未剪辑视频分类冠军算法模型：</p>
<p>代码链接：<a href="https://github.com/yjxiong/anet2016-cuhk" target="_blank" rel="noopener">https://github.com/yjxiong/anet2016-cuhk</a></p>
<p>系统：ubuntu</p>
<p>装上unzip和cmake</p>
<p>复现activitynet2016未剪辑视频分类冠军算法模型：<a href="https://github.com/yjxiong/anet2016-cuhk" target="_blank" rel="noopener">https://github.com/yjxiong/anet2016-cuhk</a></p>
<p>主要通过脚本安装<a href="https://github.com/yjxiong/anet2016-cuhk/blob/master/build_all.sh" target="_blank" rel="noopener">https://github.com/yjxiong/anet2016-cuhk/blob/master/build_all.sh</a></p>
<p>环境准备如下：</p>
<ol>
<li>安装anaconda</li>
<li>安装caffe</li>
<li>安装tensorflow</li>
<li>安装opencv</li>
</ol>
<p>脚本有一些地方运行不了，整理的之后步骤如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#!/usr/bin/env bash</span><br><span class="line"># TODO: add compilation steps</span><br><span class="line"></span><br><span class="line"># update the submodules: Caffe and Dense Flow</span><br><span class="line">git submodule update --remote</span><br><span class="line"></span><br><span class="line"># install Caffe dependencies</span><br><span class="line">sudo apt-get -qq install libprotobuf-dev libleveldb-dev libsnappy-dev libhdf5-serial-dev protobuf-compiler libatlas-base-dev</span><br><span class="line">不对！！！！！！！！！！sudo apt-get -qq install --no-install-recommends libboost1.55-all-dev</span><br><span class="line"> 改成sudo apt-get -qq install --no-install-recommends libboost-all-dev</span><br><span class="line">sudo apt-get -qq install libgflags-dev libgoogle-glog-dev liblmdb-dev</span><br><span class="line"></span><br><span class="line"># install Dense_Flow dependencies</span><br><span class="line">sudo apt-get -qq install libzip-dev</span><br><span class="line"></span><br><span class="line"># install common dependencies: OpenCV</span><br><span class="line"># adpated from OpenCV.sh</span><br><span class="line">version=&quot;2.4.13&quot;</span><br><span class="line"></span><br><span class="line">echo &quot;Building OpenCV&quot; $version</span><br><span class="line">mkdir 3rd-party/</span><br><span class="line">cd 3rd-party/</span><br><span class="line"></span><br><span class="line">echo &quot;Installing Dependenices&quot;</span><br><span class="line">不对！！！！！！！！！sudo apt-get -qq install libopencv-dev build-essential checkinstall cmake pkg-config yasm libjpeg-dev libjasper-dev libavcodec-dev libavformat-dev libswscale-dev libdc1394-22-dev libxine-dev libgstreamer0.10-dev libgstreamer-plugins-base0.10-dev libv4l-dev python-dev python-numpy libtbb-dev libqt4-dev libgtk2.0-dev libfaac-dev libmp3lame-dev libopencore-amrnb-dev libopencore-amrwb-dev libtheora-dev libvorbis-dev libxvidcore-dev x264 v4l-utils</span><br><span class="line"></span><br><span class="line">改成sudo apt-get -qq install libopencv-dev build-essential checkinstall cmake pkg-config yasm libjpeg-dev libjasper-dev libavcodec-dev libavformat-dev libswscale-dev libdc1394-22-dev libxine2-dev libgstreamer0.10-dev libgstreamer-plugins-base0.10-dev libv4l-dev python-dev python-numpy libtbb-dev libqt4-dev libgtk2.0-dev libfaac-dev libmp3lame-dev libopencore-amrnb-dev libopencore-amrwb-dev libtheora-dev libvorbis-dev libxvidcore-dev x264 v4l-utils</span><br><span class="line"></span><br><span class="line">echo &quot;Downloading OpenCV&quot; $version</span><br><span class="line"></span><br><span class="line">echo &quot;Installing OpenCV&quot; $version</span><br><span class="line">unzip OpenCV-$version.zip</span><br><span class="line">cd opencv-$version</span><br><span class="line">mkdir build</span><br><span class="line">cd build</span><br><span class="line">cmake -D CMAKE_BUILD_TYPE=RELEASE -D WITH_TBB=ON  -D WITH_V4L=ON  -D WITH_QT=ON -D WITH_OPENGL=ON  ..</span><br><span class="line"></span><br><span class="line">!!!!!!!!!!</span><br><span class="line">在这里Makefile.config加入：</span><br><span class="line">LINKFLAGS := -Wl,-rpath,/root/anaconda3/lib</span><br><span class="line">!!!!!!!!!!</span><br><span class="line">？？？？？？？？？？cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local -D WITH_TBB=ON -D BUILD_NEW_PYTHON_SUPPORT=ON -D WITH_V4L=ON -D INSTALL_C_EXAMPLES=ON -D INSTALL_PYTHON_EXAMPLES=ON -D BUILD_EXAMPLES=ON -D BUILD_TIFF=ON -D WITH_OPENGL=ON..</span><br><span class="line"></span><br><span class="line">cmake -D CMAKE_BUILD_TYPE=RELEASE -D WITH_TBB=ON  -D WITH_V4L=ON  -D WITH_QT=ON -D WITH_OPENGL=ON  -D BUILD_TIFF=ON  ..</span><br><span class="line"></span><br><span class="line">cp lib/cv2.so ../../../</span><br><span class="line">echo &quot;OpenCV&quot; $version &quot;built&quot;</span><br><span class="line"></span><br><span class="line"># build dense_flow</span><br><span class="line">cd ../../../</span><br><span class="line"></span><br><span class="line">echo &quot;Building Dense Flow&quot;</span><br><span class="line">cd lib/dense_flow</span><br><span class="line">mkdir build</span><br><span class="line">cd build</span><br><span class="line">OpenCV_DIR=../../../3rd-party/opencv-$version/build/ cmake .. -DCUDA_USE_STATIC_CUDA_RUNTIME=OFF</span><br><span class="line">make -j</span><br><span class="line">!!!!!!!!需要下载</span><br><span class="line">echo &quot;Dense Flow built&quot;</span><br><span class="line"></span><br><span class="line">https://github.com/jaejunlee0538/openfabmap/issues/3</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># build caffe</span><br><span class="line">echo &quot;Building Caffe&quot;</span><br><span class="line">cd ../../caffe-action</span><br><span class="line">mkdir build</span><br><span class="line">cd build</span><br><span class="line">OpenCV_DIR=../../../3rd-party/opencv-$version/build/ cmake .. -DCUDA_USE_STATIC_CUDA_RUNTIME=OFF </span><br><span class="line"></span><br><span class="line">!!!!!!!!!!!!!!!改成</span><br><span class="line">OpenCV_DIR=../../../3rd-party/opencv-$version/build/ cmake .. -DCUDA_USE_STATIC_CUDA_RUNTIME=OFF -D BUILD_TIFF=ON</span><br><span class="line">然后如果你装了anaconda包的话，删除anaconda/lib/下面的 libm https://blog.csdn.net/ccemmawatson/article/details/42004105</span><br><span class="line">sudo rm -rf libm*</span><br><span class="line"></span><br><span class="line">make -j32</span><br><span class="line">echo &quot;Caffe Built&quot;</span><br><span class="line">cd ../../../</span><br><span class="line"></span><br><span class="line"># install python packages</span><br><span class="line">pip install -r py_requirements.txt</span><br><span class="line"></span><br><span class="line"># setup for web demo</span><br><span class="line">mkdir tmp</span><br><span class="line"></span><br><span class="line"># copy website files to the folder</span><br><span class="line">wget -O 3rd-party/bootstrap-fileinput.zip https://github.com/kartik-v/bootstrap-fileinput/zipball/master</span><br><span class="line">cd 3rd-party</span><br><span class="line">unzip bootstrap-fileinput.zip</span><br><span class="line">mv kartik-v-bootstrap-* Bootstrap-fileinput</span><br><span class="line"></span><br><span class="line">!!!!!!!!!!!cannot move &apos;kartik-v-bootstrap-fileinput-61c9523&apos; to &apos;Bootstrap-fileinput/kartik-v-bootstrap-fileinput-61c9523&apos;: Directory not empty</span><br><span class="line"></span><br><span class="line">cp -r Bootstrap-fileinput/js ../static/js</span><br><span class="line">cp Bootstrap-fileinput/css/* ../static/css/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">export ANET_HOME=/root/anet2016-cuhk</span><br></pre></td></tr></table></figure>

	
	</div>
  <a type="button" href="/2018/05/20/复现activitynet2016未剪辑视频分类冠军算法模型/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-8">
		<h3 class="title">
			<a href="/2018/05/15/CNN_MBH_StackedC3D_ovrSVM_Voting/" >论文阅读笔记之CNN_MBH_StackedC3D_ovrSVM_Voting</a>
		</h3>
		</div>
	<div class="col-md-4">
		<div class="date">post @ 2018-05-15  </div>
		</div>
	</div>
	


			<div class="entry">
  <div class="row">
	
	
		<h4 id="作者"><a href="#作者" class="headerlink" title="作者"></a>作者</h4><p>Jianqin Yin1, Bin Wang2, Xiaoli Liu1, Bin Fang2, Yanchun Wu1, Yanyan Bao2 </p>
<h4 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h4><p>提取CNN（主要捕获外观特征） , MBH 和 stacked C3D 特征（主要捕获动态特征） ，构造one-vs-rest 线性 SVM ，对结果进行投票</p>
<h4 id="特征提取"><a href="#特征提取" class="headerlink" title="特征提取"></a>特征提取</h4><ul>
<li>MBH：运动边界直方图，通过GMM和Fisher Vector 进行编码</li>
<li>Stacked C3D：提取时间和空间信息。由数据集Sport-1M 进行训练，通过PCA降维。通过把序列分为3部分mean-pool 获取时间信息。最后对特征堆叠获得stacked 3D</li>
<li>CNN（ImageNetShuffle） ：从Google inception net提取，在每秒2帧的pool5层提取CNN特征，对帧进行mean-pool，然后使用L1-normalization.</li>
</ul>
<h4 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h4><p>通过one-vs-rest linear SVM分类，weight voting 和 hard voting 做决策<br>如果3个结果都不同，使用weight voting：通过one-vs-rest linear SVM 学习每个动作的权重，归一所有动作得到每个动作的置信度，最高票动作是最终结果<br>如果至少2个结果相同，使用one-vs-rest linear SVM 对每类特征学习其置信度</p>
<h5 id="置信度计算公式："><a href="#置信度计算公式：" class="headerlink" title="置信度计算公式："></a>置信度计算公式：</h5><ul>
<li>cof =1- (1- c1) (1- c2) </li>
<li>cof =1- (1- c1) (1- c2) (1- c3) </li>
</ul>

	
	</div>
  <a type="button" href="/2018/05/15/CNN_MBH_StackedC3D_ovrSVM_Voting/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-8">
		<h3 class="title">
			<a href="/2018/05/15/CNN_C3D_averagePooling_LSTM_MoE/" >论文阅读笔记之CNN_C3D_averagePooling_LSTM_MoE</a>
		</h3>
		</div>
	<div class="col-md-4">
		<div class="date">post @ 2018-05-15  </div>
		</div>
	</div>
	


			<div class="entry">
  <div class="row">
	
	
		<h4 id="作者"><a href="#作者" class="headerlink" title="作者"></a>作者</h4><p>Feng Mao </p>
<h4 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h4><p>提取CNN和C3D特征作为帧特征，使用average pooling 和 LSTM 将帧特征聚集为视频特征，使用MoE进行分类<br>CNN_C3D_averagePooling_LSTM_MoEcd </p>
<h4 id="特征提取"><a href="#特征提取" class="headerlink" title="特征提取"></a>特征提取</h4><p>CNN：使用数据集ImageNet 21k 训练模型inception-v1 。在分类层POOL5/7X7YS1，选择分类层之前的那一个hidden层作为帧级特征第一部分。<br>C3D：使用PCA降维</p>
<h4 id="特征聚合"><a href="#特征聚合" class="headerlink" title="特征聚合"></a>特征聚合</h4><p>无监督 average pooling<br>有监督 aggregation LSTM</p>
<h4 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h4><p> MoE(Mixture of experts) ，结合不同特征和不同聚合模型：</p>
<ul>
<li>CNN + average pooling </li>
<li>CNN + LSTM </li>
<li>C3D + average pooling</li>
<li>C3D + LSTM </li>
</ul>
<p>需要训练的参数是CNN and C3D  的LSTM参数和 MoE parameters </p>

	
	</div>
  <a type="button" href="/2018/05/15/CNN_C3D_averagePooling_LSTM_MoE/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-8">
		<h3 class="title">
			<a href="/2018/05/10/activity2017-challenge/" >ActivityNet2017问题</a>
		</h3>
		</div>
	<div class="col-md-4">
		<div class="date">post @ 2018-05-10  </div>
		</div>
	</div>
	


			<div class="entry">
  <div class="row">
	
	
		<h2 id="1-Untrimmed-Video-Classification"><a href="#1-Untrimmed-Video-Classification" class="headerlink" title="1. Untrimmed Video Classification"></a>1. Untrimmed Video Classification</h2><h3 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h3><p>预测未剪辑视频中的活动。未剪辑视频视频可以包含不止一个活动，并包含包含大量活动上下文信息。要求算法可以整体分析一个视频并进行分类。</p>
<h3 id="数据集"><a href="#数据集" class="headerlink" title="数据集"></a>数据集</h3><p>ActivityNet Version 1.3 dataset，包含超过648小时的20k视频，平均一个视频1.5个注解。包含200个不同的活动，50%为训练集，25%验证集，25%测试集</p>
<h3 id="评估指标"><a href="#评估指标" class="headerlink" title="评估指标"></a>评估指标</h3><p>用 top-1 error (e)评估算法好坏</p>
<p>m个视频，n个标签，p为预测值，g为真实值，计算公式如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">e = \frac&#123;1&#125;&#123;m&#125; \sum_&#123;i=1&#125;^&#123;m&#125; f(i)</span><br><span class="line"></span><br><span class="line">f(i) = \frac&#123;1&#125;&#123;n&#125; \sum_&#123;j=1&#125;^&#123;n&#125; d(p_i, g_&#123;ij&#125;)</span><br></pre></td></tr></table></figure>
<p>预测成功时fd = 1</p>
<p>代码在这里：<br><a href="https://github.com/activitynet/ActivityNet/blob/master/Evaluation/get_classification_performance.py" target="_blank" rel="noopener">https://github.com/activitynet/ActivityNet/blob/master/Evaluation/get_classification_performance.py</a></p>
<h2 id="2-Trimmed-Action-Recognition"><a href="#2-Trimmed-Action-Recognition" class="headerlink" title="2. Trimmed Action Recognition"></a>2. Trimmed Action Recognition</h2><h3 id="描述-1"><a href="#描述-1" class="headerlink" title="描述"></a>描述</h3><p>在经过裁剪的视频中进行动作识别，每个视频只有一个单度的动作，动作都持续10秒</p>
<h3 id="数据集-1"><a href="#数据集-1" class="headerlink" title="数据集"></a>数据集</h3><p>使用 Kinetics 数据集，包含大约300k视频剪辑，400个人类动作，每个视频只有1类，取自不同的YouTube视频，包括人与物的交互以及人与人的交互</p>
<h3 id="评估指标-1"><a href="#评估指标-1" class="headerlink" title="评估指标"></a>评估指标</h3><p>算法对每个视频预测k个预测标签lj，j = 1,2…k。该视频的真实标签是g，预测成功时d = 1 否则 d=0<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">e = \min_&#123;j&#125; d(l_&#123;j&#125;, g)</span><br></pre></td></tr></table></figure></p>
<p>代码在这<br><a href="https://github.com/activitynet/ActivityNet/blob/master/Evaluation/get_kinetics_performance.py" target="_blank" rel="noopener">https://github.com/activitynet/ActivityNet/blob/master/Evaluation/get_kinetics_performance.py</a></p>
<h2 id="3-Temporal-Action-Proposals"><a href="#3-Temporal-Action-Proposals" class="headerlink" title="3. Temporal Action Proposals"></a>3. Temporal Action Proposals</h2><h3 id="描述-2"><a href="#描述-2" class="headerlink" title="描述"></a>描述</h3><p>在未剪辑视频中定位并识别发生了人类活动的短期片段，要计算编码评分是高效的，且可以有效识别时间段。</p>
<p>在许多大规模视频分析场景中，人们有兴趣定位和识别长时间未修剪的视频中短时间间隔内出现的人类活动。目前的行为检测方法仍然很难处理大规模视频集合，并且有效地解决这一任务对于计算机视觉系统仍然很难。这是由于：<br>（1）当前动作识别方法的计算复杂性；<br>（2）缺少可以针对每个视频提出更少间隔的方法，使得行为处理仍然集中在大量候选时间片段中。这些候选时间片段被广泛称为行为建议（Action Proposals）。</p>
<p>为了在大规模和实际情况下适用，有用的Action Proposals方法由两个目标驱动：<br>（1）Proposal方法必须在计算上高效，对时间段进行表示，编码和打分。<br>（2）Proposal方法必须区分我们感兴趣的活动，以便仅检索包含指示这些活动类别的视觉信息的时间片段。</p>
<h3 id="数据集-2"><a href="#数据集-2" class="headerlink" title="数据集"></a>数据集</h3><p>ActivityNet Version 1.3 dataset ，该数据集包含超过648个小时的未修剪视频，共约2万个视频。它包含200种不同的日常活动，例如：’walking the dog’, ‘long jump’, and ‘vacuuming floor’等。数据量分布：train（~50%）, validation（~25%）, test（~25%）。<br>下载链接</p>
<h3 id="评估指标-2"><a href="#评估指标-2" class="headerlink" title="评估指标"></a>评估指标</h3><p>此任务使用Average Recall和Average Number of Proposals per Video（AR-AN）曲线作为评估指标。一个proposal为真的条件：该proposal的时间区间和真实值（ground-truth）的区间的tIOU（temporal intersection orver union）大于等于一个阈值（比如：tIOU&gt;0.5<br>）。AR<br> 被定义为召回值的平均值（满足0.5&lt;tIOU≤0.9<br>，步长为0.05<br>）。AN<br> 被定义为proposals总数除以测试子集中的视频数量。当计算 AR−AN<br> 曲线上的值时，我们考虑 AN<br> 集中在1到100（含）之间的值，步长为1。</p>
<p>使用此评估指标评估提交文件的具体过程：</p>
<p>使</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\frac&#123;\text&#123;total number of proposals in the submission file&#125;&#125;&#123;\text&#123;total number of videos in the testing subset&#125;&#125;</span><br></pre></td></tr></table></figure>
<p>ANmax<br> 表示在评估方法允许每个视频平均proposals数量的最大值。这里，ANmax=100<br>。让 R=ANmaxANsubmission<br>，那么我们按照以下方式预处理提交文件：</p>
<p>若 R&lt;1<br>，那么对于测试子集中的每个视频，我们会根据proposal得分对其proposal进行分类，并丢弃得分最低的 R%<br> 的proposal。<br>若 R≥1<br>，那么对于测试子集中的每个视频，我们会根据提案得分对提案进行排序，并复制每个视频中得分最低的 (R−1)%<br> 提案，并将结果数据点添加到 AR−AN<br> 曲线上。然后计算所得到的最终曲线下的面积并将其作为提交文件的度量分数。<br>过滤后的提交结果文件将有：AN=ANmax<br>。对于每一个 p<br> 值（从1到100，步长为1），仅仅使用得分前 p%<br> 的proposal计算 AR<br>，并将结果数据点添加到 AR−AN<br> 曲线上。然后计算所得到的最终曲线下的面积并将其作为提交文件的度量分数。</p>
<p>在验证子集上提供基线proposal方法（称为统一随机）的结果。统一随机（Uniform Random）：每个proposal的中心和长度是独立地从间隔内的均匀随机分布 [0,d]<br> 中抽取的，其中 d<br> 为视频长度。这个模型的得分：44.88%<br>。<br>虚线表示在平均超过一个 tIoU<br> 阈值时的召回性能，而实线表示跨所有 tIoU<br> 阈值的平均召回率。可以看出，在 tIoU<br> 比较小时召回性能较高，但在 tIoU<br> 较大时急速下降。因此，对于在评估指标上得分较高的proposal方法，需要重点关注对低和高 tIoU<br> 阈值下都得到相对较高的召回率。</p>
<h2 id="4-Temporal-Action-Localization"><a href="#4-Temporal-Action-Localization" class="headerlink" title="4. Temporal Action Localization"></a>4. Temporal Action Localization</h2><h3 id="描述-3"><a href="#描述-3" class="headerlink" title="描述"></a>描述</h3><p>尽管最近在大规模视频分析方面取得了进展，但Temporal Action Localization仍然是计算机视觉中最具挑战性的未解决问题之一。这种搜索问题阻碍了从消费者视频摘要到监控，人群监控和老年护理等各种实际应用。因此，我们致力于推动开发高效，准确的自动化方法，以搜索和检索视频集合中的事件和活动。</p>
<p>这项任务旨在鼓励计算机视觉研究人员设计高性能的行为定位系统。</p>
<h3 id="数据集-3"><a href="#数据集-3" class="headerlink" title="数据集"></a>数据集</h3><p>此任务采用ActivityNet 1.3版本数据集。该数据集包含超过648个小时的未修剪视频，共约2万个视频。它包含200种不同的日常活动，例如：’walking the dog’, ‘long jump’, and ‘vacuuming floor’等。数据量分布：train（~50%）, validation（~25%）, test（~25%）。</p>
<h3 id="评估指标-3"><a href="#评估指标-3" class="headerlink" title="评估指标"></a>评估指标</h3><p>评估服务器使用的评估代码可以在这里<br><a href="https://github.com/activitynet/ActivityNet/blob/master/Evaluation/get_detection_performance.py。" target="_blank" rel="noopener">https://github.com/activitynet/ActivityNet/blob/master/Evaluation/get_detection_performance.py。</a></p>
<p>插值平均精度（Average Precision，AP）作为评估每个行为类别结果的指标。然后，AP<br> 对所有活动类别进行平均，得到 mAP<br>。</p>
<p>一个detection为真的条件：该tIOU（temporal intersection orver union）大于等于一个阈值（比如：tIOU&gt;0.5<br>）。此任务中使用的官方指标是平均mAP，其被定义为所有mAP值的平均值，其中 tIOU<br> 阈值满足：0.5&lt;tIOU≤0.9<br>，步长为0.05<br>。</p>
<h2 id="5-Dense-Captioning-Events-in-Videos"><a href="#5-Dense-Captioning-Events-in-Videos" class="headerlink" title="5. Dense-Captioning Events in Videos"></a>5. Dense-Captioning Events in Videos</h2><h3 id="描述-4"><a href="#描述-4" class="headerlink" title="描述"></a>描述</h3><p>大多数自然视频包含众多活动。例如，在“人弹钢琴”的视频中，视频可能还会包含另一个“人跳舞”或“人群鼓掌”。这项挑战研究密集字幕事件的任务，其中涉及检测和描述视频中的事件。这个挑战使用了ActivityNet Captions数据集，这是一个新的密集字幕事件的大型基准。ActivityNet Captions包含20K个视频，总计849个视频小时，总共有100K个描述，每个视频都有其独特的开始和结束时间。</p>
<h3 id="数据集-4"><a href="#数据集-4" class="headerlink" title="数据集"></a>数据集</h3><p>ActivityNet Captions数据集将用于此挑战。数据集对视频用一系列时间注释的句子进行描述。每个句子涵盖视频的一个唯一的片段，描述发生的多个事件。这些事件可能会在很长或很短的时间内发生。平均而言，Captivity网络中的每个视频都包含3.65个句子，总共产生了10万个句子。每个视频的句子数量遵循相对正态的分布。而且，随着视频持续时间的增加，句子的数量也增加。每个句子的平均长度为13.48个字，也是正态分布的。</p>
<h3 id="评估指标-4"><a href="#评估指标-4" class="headerlink" title="评估指标"></a>评估指标</h3><p>评估代码可以在这里：<a href="https://github.com/ranjaykrishna/densevid_eval" target="_blank" rel="noopener">https://github.com/ranjaykrishna/densevid_eval</a></p>
<p>受密集图像字幕指标的启发，使用类似的指标来衡量模型对定位和字幕事件的联合能力。在前1000个proposal时，评估指标计算 tIOU<br> 在 0.3,0.5,0.7<br> 阈值上的平均准确率（AP）。使用传统评估指标来衡量我们标题的精确度：BLEU，METEOR和CIDDEr。</p>

	
	</div>
  <a type="button" href="/2018/05/10/activity2017-challenge/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-8">
		<h3 class="title">
			<a href="/2018/05/01/git学习篇/" >git学习</a>
		</h3>
		</div>
	<div class="col-md-4">
		<div class="date">post @ 2018-05-01  </div>
		</div>
	</div>
	


			<div class="entry">
  <div class="row">
	
	
		<p>git(改变指针来管理版本)</p>
<h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><p>Working Tree 工作区：本地文件夹<br>Repository 版本库 ：工作区中的隐藏目录.git   .git中包含了暂存区（stage或index），分支（master），以及指针head<br>add 把文件添加进暂存区，commit把repo里的文件提交到当前分区</p>
<h3 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git init 新建本地版本库</span><br><span class="line">git add &lt;filename&gt;把文件添加到repo</span><br><span class="line">git commit -m “XXXXXXX说明”</span><br><span class="line">git status 查看repo状态 （有3种状态）</span><br><span class="line">git diff 查看修改</span><br><span class="line">git diff HEAD —&lt;filename&gt;查看filename在工作区和repo的区别</span><br></pre></td></tr></table></figure>
<h3 id="撤销操作"><a href="#撤销操作" class="headerlink" title="撤销操作"></a>撤销操作</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">git checkout —&lt;filename&gt;丢弃工作区修改</span><br><span class="line">git reset HEAD &lt;filename&gt; 丢弃暂存区修改</span><br><span class="line">撤销本地提交：版本退回</span><br><span class="line"></span><br><span class="line">git log 查看历史提交版本</span><br><span class="line">git reset —hard HEAD^ 退回上个版本</span><br><span class="line">git reset —hard XXXXid 前进到新版本</span><br><span class="line">git reflog 记录命令历史</span><br></pre></td></tr></table></figure>
<h3 id="删除操作"><a href="#删除操作" class="headerlink" title="删除操作"></a>删除操作</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">工作区文件删除后删除版本库文件</span><br><span class="line">git rm &lt;filename&gt;</span><br><span class="line">git commit -m “delete filename”</span><br><span class="line"></span><br><span class="line">工作区文件删除后通过版本库文件进行删除 </span><br><span class="line">git checkout — &lt;filename&gt;</span><br></pre></td></tr></table></figure>
<h3 id="远程仓库"><a href="#远程仓库" class="headerlink" title="远程仓库"></a>远程仓库</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git remote  -v查看远程repo版本</span><br><span class="line">git push -u origin master 把本地仓库push到远程仓库上</span><br><span class="line">git clone git@github.com:XXXXXXX/XXXXXXXXXX.git 从远程仓库克隆项目到本地仓库</span><br></pre></td></tr></table></figure>
<h3 id="分支"><a href="#分支" class="headerlink" title="分支"></a>分支</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b dev 创建dev分支并切换过去</span><br><span class="line">git branch dev  创建dev分支 </span><br><span class="line">git checkout dev    切换dev分支</span><br><span class="line">git branch 查看当前分支</span><br><span class="line">git merge dev 合并分支</span><br><span class="line">git branch -d dev删除分支</span><br><span class="line">git log --graph 查看分支合并图</span><br></pre></td></tr></table></figure>

	
	</div>
  <a type="button" href="/2018/05/01/git学习篇/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-8">
		<h3 class="title">
			<a href="/2018/04/11/FaaS踩坑之openwhisk与fission对比/" >FaaS踩坑之openwhisk与fission对比</a>
		</h3>
		</div>
	<div class="col-md-4">
		<div class="date">post @ 2018-04-11  </div>
		</div>
	</div>
	


			<div class="entry">
  <div class="row">
	
	
		<h2 id="实现层面"><a href="#实现层面" class="headerlink" title="实现层面"></a>实现层面</h2><h3 id="fission运行流程"><a href="#fission运行流程" class="headerlink" title="fission运行流程"></a>fission运行流程</h3><p><img src="https://www.kubernetes.org.cn/img/2017/08/20170811193044.jpg" alt="image"></p>
<ol start="0">
<li>controller：对外提供api，通过fission CLI 控制内部组件</li>
<li>router：用户发送http请求请求服务（调用函数）。收到请求，查看缓存（fiction与podurl间的映射）。对于调用过function，router会很快的拿到返回值；没调用过，向 poolmgr 请求一个新的实例。poolmgr 有一个空闲 pods 池，它会选择一个 pod，将函数加载进去（将请求发送到 pod 的容器中），并将 pod 地址返回给 router。</li>
<li>创建环境：对于用户创建的environment，poolmgr中有循环的线程自动在kubernetes中根据env的镜像创建包含三副本pod的deployment，每个pod中有两个container，一个使用env的镜像创建，另一个是fission中的辅助container，镜像是fission/fetcher。两个container共享一个volume。因为env是定义基础镜像，而一个env可能会关联许多function，所以需要fetcher根据具体的function在通用的container里运行不同的code。</li>
<li>poolmgr还会定期清理“不活跃”的deployment，如env。还会定期删除不活跃的pod，让kubernetes自动创建新的、干净的pod供其他function使用。poolmgr提供的API只有两个，一个是根据function获取对应的service url，另一个是类似心跳API帮助维护缓存。因为router里也维护有function到service url的缓存，所以当function被调用时，router会通知poolmgr更新一下对应service对象的时间，避免被误删。</li>
</ol>
<h3 id="openwhisk运行流程"><a href="#openwhisk运行流程" class="headerlink" title="openwhisk运行流程"></a>openwhisk运行流程</h3><p><img src="http://kityminder-img.gz.bcebos.com/fddf5b1af7a3a2de4aebc65b54514d9a203e502f" alt="image"></p>
<ol>
<li>nginx：处理用户发送（如调用函数操作等）将其转发（以及ssl终止）。</li>
<li>contraller：是用户可执行操作（ CRUD请求以及操作调用）的接口。</li>
<li>CouchDB：存储操作（whisk数据库），身份验证（subjects数据库）。</li>
<li>consul：服务发现组件，持续检查系统中可用执行者的运行状态来监视invoker，告诉contraller哪些invoker可用</li>
<li>kafka：contraller和invoker只通过由 Kafka 缓冲和持久存储的消息进行通信。缓冲，减轻内存负担。确保消息不会在系统崩溃时丢失。</li>
<li>invoker：启动Docker执行操作。对于每个操作调用，衍生一个 Docker 容器，将操作码注入。使用传递给代码的参数来执行代码，获取结果，然后销毁该容器</li>
<li>储存结果：存储在CouchDB终端 whisks 数据库中作为 ActivationId 下的激活</li>
</ol>
<h3 id="开发语言"><a href="#开发语言" class="headerlink" title="开发语言"></a>开发语言</h3><h5 id="fission"><a href="#fission" class="headerlink" title="fission"></a>fission</h5><ul>
<li>Go语言</li>
</ul>
<h5 id="openwhisk"><a href="#openwhisk" class="headerlink" title="openwhisk"></a>openwhisk</h5><ul>
<li>scala语言</li>
</ul>
<h3 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h3><h5 id="fission-1"><a href="#fission-1" class="headerlink" title="fission"></a>fission</h5><ul>
<li>controller</li>
<li>router</li>
<li>executor</li>
<li>kubeWatcher</li>
<li>timer</li>
<li>MessageQueueMgr</li>
<li>storageSvc</li>
<li>builderMgr</li>
</ul>
<h5 id="openwhisk-1"><a href="#openwhisk-1" class="headerlink" title="openwhisk"></a>openwhisk</h5><ul>
<li>nginx</li>
<li>contraller</li>
<li>CouchDB</li>
<li>consul</li>
<li>kafka</li>
<li>invoker</li>
</ul>
<h2 id="功能层面"><a href="#功能层面" class="headerlink" title="功能层面"></a>功能层面</h2><h3 id="组件-1"><a href="#组件-1" class="headerlink" title="组件"></a>组件</h3><h4 id="控制器"><a href="#控制器" class="headerlink" title="控制器"></a>控制器</h4><h5 id="fission-2"><a href="#fission-2" class="headerlink" title="fission"></a>fission</h5><ul>
<li>controller，是fission对外提供管理API的组件。所有其他组件通过关注 controller 来更新负责追踪函数、HTTP 路由、事件触发器和环境镜像</li>
</ul>
<h5 id="openwhisk-2"><a href="#openwhisk-2" class="headerlink" title="openwhisk"></a>openwhisk</h5><ul>
<li>contraller：是用户可执行操作（如CRUD请求以及操作调用）的接口。</li>
<li>consul：服务发现组件，持续检查系统中可用执行者的运行状态来监视invoker，告诉contraller哪些invoker可用</li>
<li>kafka：一种高吞吐量、分布式的发布/预订消息传递系统。contraller和invoker只通过由 Kafka 缓冲和持久存储的消息进行通信。可以减轻在内存中进行缓冲的负担并降低伴随的 OutOfMemoryException 风险，确保消息不会在系统崩溃时丢失。使用异步调用模型</li>
</ul>
<h4 id="请求响应"><a href="#请求响应" class="headerlink" title="请求响应"></a>请求响应</h4><h5 id="fission-3"><a href="#fission-3" class="headerlink" title="fission"></a>fission</h5><ul>
<li><p>router：收到请求，查看缓存（fiction与podurl间的映射）。对于调用过function，router会很快的拿到返回值；没调用过，向 poolmgr 请求一个新的实例。poolmgr 有一个空闲 pods 池，它会选择一个 pod，将函数加载进去（将请求发送到 pod 的容器中），并将 pod 地址返回给 router。</p>
<h5 id="openwhisk-3"><a href="#openwhisk-3" class="headerlink" title="openwhisk"></a>openwhisk</h5></li>
<li><p>API网关</p>
</li>
</ul>
<h4 id="服务发现组件"><a href="#服务发现组件" class="headerlink" title="服务发现组件"></a>服务发现组件</h4><h5 id="fission-4"><a href="#fission-4" class="headerlink" title="fission"></a>fission</h5><ul>
<li>router，与controller和poolmgr打交道，会监听 controller 中triggers的更新，动态的更新web service的route定义。</li>
<li>poolmgr 负责管理空闲的环境容器池、将函数加载到这些容器当中、以及杀死空闲的函数实例。</li>
</ul>
<h5 id="openwhisk-4"><a href="#openwhisk-4" class="headerlink" title="openwhisk"></a>openwhisk</h5><ul>
<li>consul：服务发现组件，持续检查系统中可用执行者的运行状态来监视invoker，告诉contraller哪些invoker可用</li>
</ul>
<h4 id="触发器"><a href="#触发器" class="headerlink" title="触发器"></a>触发器</h4><h5 id="fission-5"><a href="#fission-5" class="headerlink" title="fission"></a>fission</h5><ul>
<li>Http Trigger</li>
<li>Time Trigger </li>
<li>MQ Trigger </li>
</ul>
<h5 id="openwhisk-5"><a href="#openwhisk-5" class="headerlink" title="openwhisk"></a>openwhisk</h5><ul>
<li><p>invoker：启动Docker执行操作，对于每个操作调用，都会衍生一个 Docker 容器，将操作码注入。使用传递给代码的参数来执行代码，获取结果，然后销毁该容器</p>
</li>
<li><p>cloudant</p>
</li>
<li>custom trigger</li>
<li>github</li>
<li>messahub</li>
<li>moblie push</li>
<li>priodic</li>
</ul>
<h4 id="数据存储"><a href="#数据存储" class="headerlink" title="数据存储"></a>数据存储</h4><h5 id="fission-6"><a href="#fission-6" class="headerlink" title="fission"></a>fission</h5><ul>
<li>etcd</li>
</ul>
<h5 id="openwhisk-6"><a href="#openwhisk-6" class="headerlink" title="openwhisk"></a>openwhisk</h5><ul>
<li>CouchDB</li>
</ul>
<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><h4 id="语言支持"><a href="#语言支持" class="headerlink" title="语言支持"></a>语言支持</h4><h5 id="fission-7"><a href="#fission-7" class="headerlink" title="fission"></a>fission</h5><ul>
<li>Binary </li>
<li>Go    </li>
<li>.NET    </li>
<li>.NET 2.0    </li>
<li>NodeJS (Alpine)    </li>
<li>NodeJS (Debian)    </li>
<li>Perl    </li>
<li>PHP 7    </li>
<li>Python 3    </li>
<li>Ruby</li>
</ul>
<h5 id="openwhisk-7"><a href="#openwhisk-7" class="headerlink" title="openwhisk"></a>openwhisk</h5><ul>
<li>JavaScript</li>
<li>Python</li>
<li>Swift</li>
<li>PhP</li>
<li>Docker</li>
</ul>
<h4 id="函数上传支持"><a href="#函数上传支持" class="headerlink" title="函数上传支持"></a>函数上传支持</h4><h5 id="fission-8"><a href="#fission-8" class="headerlink" title="fission"></a>fission</h5><ul>
<li>环境支持的语言</li>
<li>任何兼容二进制的可执行文件和脚本</li>
</ul>
<h5 id="openwhisk-8"><a href="#openwhisk-8" class="headerlink" title="openwhisk"></a>openwhisk</h5><ul>
<li>环境支持的语言</li>
<li>Java 方法</li>
<li>任何兼容二进制的可执行文件，包括打包为 Docker 容器的 Go 程序和定制可执行文件</li>
</ul>
<h5 id="源码形式"><a href="#源码形式" class="headerlink" title="源码形式"></a>源码形式</h5><h6 id="云端编译环境"><a href="#云端编译环境" class="headerlink" title="云端编译环境"></a>云端编译环境</h6><p>####### 内容</p>
<p>####### 指令</p>
<h5 id="二进制形式"><a href="#二进制形式" class="headerlink" title="二进制形式"></a>二进制形式</h5><h6 id="本地编译环境要求"><a href="#本地编译环境要求" class="headerlink" title="本地编译环境要求"></a>本地编译环境要求</h6><h4 id="开发方式"><a href="#开发方式" class="headerlink" title="开发方式"></a>开发方式</h4><h5 id="fission-9"><a href="#fission-9" class="headerlink" title="fission"></a>fission</h5><ul>
<li>CLI</li>
</ul>
<h5 id="openwhisk-9"><a href="#openwhisk-9" class="headerlink" title="openwhisk"></a>openwhisk</h5><ul>
<li>浏览器开发</li>
<li>Cloud Functions CLI</li>
</ul>
<h4 id="启动方式"><a href="#启动方式" class="headerlink" title="启动方式"></a>启动方式</h4><h5 id="fission-10"><a href="#fission-10" class="headerlink" title="fission"></a>fission</h5><ul>
<li>冷启动</li>
</ul>
<h5 id="openwhisk-10"><a href="#openwhisk-10" class="headerlink" title="openwhisk"></a>openwhisk</h5><h4 id="函数操作"><a href="#函数操作" class="headerlink" title="函数操作"></a>函数操作</h4><h5 id="fission-11"><a href="#fission-11" class="headerlink" title="fission"></a>fission</h5><ul>
<li>通过kubectl对pod进行操作</li>
</ul>
<h5 id="openwhisk-11"><a href="#openwhisk-11" class="headerlink" title="openwhisk"></a>openwhisk</h5><ul>
<li>contraller：是用户可执行操作（如CRUD请求以及操作调用）的接口。</li>
</ul>
<h5 id="打包上传"><a href="#打包上传" class="headerlink" title="打包上传"></a>打包上传</h5><h5 id="调用方式"><a href="#调用方式" class="headerlink" title="调用方式"></a>调用方式</h5><h5 id="fission-12"><a href="#fission-12" class="headerlink" title="fission"></a>fission</h5><ul>
<li>触发器关联</li>
</ul>
<h5 id="openwhisk-12"><a href="#openwhisk-12" class="headerlink" title="openwhisk"></a>openwhisk</h5><ul>
<li>触发器关联</li>
<li>Cloud Functions API</li>
<li>Cloud Functions CLI</li>
<li>iOS移动SDK</li>
</ul>
<h5 id="执行时间上限"><a href="#执行时间上限" class="headerlink" title="执行时间上限"></a>执行时间上限</h5><h4 id="运行环境"><a href="#运行环境" class="headerlink" title="运行环境"></a>运行环境</h4><h5 id="fission-13"><a href="#fission-13" class="headerlink" title="fission"></a>fission</h5><ul>
<li>k8s的pod</li>
</ul>
<h5 id="openwhisk-13"><a href="#openwhisk-13" class="headerlink" title="openwhisk"></a>openwhisk</h5><ul>
<li>docker</li>
</ul>
<h5 id="运行环境的启动"><a href="#运行环境的启动" class="headerlink" title="运行环境的启动"></a>运行环境的启动</h5><h5 id="fission-14"><a href="#fission-14" class="headerlink" title="fission"></a>fission</h5><ul>
<li>Pool-based executor(poolmgr)： </li>
<li>New-deployment executor（newdeploy）：创建一个Kubernetes部署、Service和HorizontalPodAutoscaler</li>
</ul>
<h5 id="openwhisk-14"><a href="#openwhisk-14" class="headerlink" title="openwhisk"></a>openwhisk</h5><h5 id="运行环境的回收"><a href="#运行环境的回收" class="headerlink" title="运行环境的回收"></a>运行环境的回收</h5><h5 id="fission-15"><a href="#fission-15" class="headerlink" title="fission"></a>fission</h5><ul>
<li>poolmgr定期清理“不活跃”的deployment，定期删除不活跃的pod，让kubernetes自动创建新的、干净的pod供其他function使用。（如何定期待查）</li>
</ul>
<h5 id="openwhisk-15"><a href="#openwhisk-15" class="headerlink" title="openwhisk"></a>openwhisk</h5><h4 id="结果返回"><a href="#结果返回" class="headerlink" title="结果返回"></a>结果返回</h4><h5 id="fission-16"><a href="#fission-16" class="headerlink" title="fission"></a>fission</h5><ul>
<li>直接返回</li>
</ul>
<h5 id="openwhisk-16"><a href="#openwhisk-16" class="headerlink" title="openwhisk"></a>openwhisk</h5><ul>
<li>储存在CouchDB的输出中</li>
</ul>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><h4 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h4><h5 id="fission-17"><a href="#fission-17" class="headerlink" title="fission"></a>fission</h5><h5 id="openwhisk-17"><a href="#openwhisk-17" class="headerlink" title="openwhisk"></a>openwhisk</h5><ul>
<li>package</li>
<li>包含操作和订阅源</li>
<li>绑定到包指定缺省参数</li>
</ul>
<h4 id="身份认证"><a href="#身份认证" class="headerlink" title="身份认证"></a>身份认证</h4><h5 id="fission-18"><a href="#fission-18" class="headerlink" title="fission"></a>fission</h5><h5 id="openwhisk-18"><a href="#openwhisk-18" class="headerlink" title="openwhisk"></a>openwhisk</h5><ul>
<li>CouchDB：在whisk数据库中存储操作，subjects数据库用于身份验证与授权操作并装入操作</li>
</ul>
<h4 id="订阅源支持"><a href="#订阅源支持" class="headerlink" title="订阅源支持"></a>订阅源支持</h4><p>全部属于某个触发器 T 的事件的流</p>
<h5 id="fission-19"><a href="#fission-19" class="headerlink" title="fission"></a>fission</h5><ul>
<li>workflow？</li>
</ul>
<h5 id="openwhisk-19"><a href="#openwhisk-19" class="headerlink" title="openwhisk"></a>openwhisk</h5><p>发布自己的订阅源使用，创建订阅源体系结构：</p>
<ul>
<li>Hook    </li>
<li>轮询</li>
<li>连接</li>
</ul>
<h4 id="自动伸缩"><a href="#自动伸缩" class="headerlink" title="自动伸缩"></a>自动伸缩</h4><h5 id="fission-20"><a href="#fission-20" class="headerlink" title="fission"></a>fission</h5><ul>
<li>自动伸缩</li>
</ul>
<h5 id="openwhisk-20"><a href="#openwhisk-20" class="headerlink" title="openwhisk"></a>openwhisk</h5><h4 id="图形仪表盘"><a href="#图形仪表盘" class="headerlink" title="图形仪表盘"></a>图形仪表盘</h4><h5 id="fission-21"><a href="#fission-21" class="headerlink" title="fission"></a>fission</h5><p>不支持</p>
<h5 id="openwhisk-21"><a href="#openwhisk-21" class="headerlink" title="openwhisk"></a>openwhisk</h5><ul>
<li>存在。用于监视活动摘要，活动日志，时间线以及过滤选项</li>
</ul>
<h2 id="项目发展现况"><a href="#项目发展现况" class="headerlink" title="项目发展现况"></a>项目发展现况</h2><h3 id="社区发展"><a href="#社区发展" class="headerlink" title="社区发展"></a>社区发展</h3><h5 id="fission-22"><a href="#fission-22" class="headerlink" title="fission"></a>fission</h5><ul>
<li>3.2k star</li>
</ul>
<h5 id="openwhisk-22"><a href="#openwhisk-22" class="headerlink" title="openwhisk"></a>openwhisk</h5><ul>
<li>3k star</li>
</ul>
<h3 id="使用者"><a href="#使用者" class="headerlink" title="使用者"></a>使用者</h3><h5 id="fission-23"><a href="#fission-23" class="headerlink" title="fission"></a>fission</h5><ul>
<li>Autodesk</li>
<li>cielo24</li>
</ul>
<h5 id="openwhisk-23"><a href="#openwhisk-23" class="headerlink" title="openwhisk"></a>openwhisk</h5><ul>
<li><a href="https://www.ibm.com/cloud-computing/bluemix/case-studies" target="_blank" rel="noopener">https://www.ibm.com/cloud-computing/bluemix/case-studies</a></li>
</ul>
<h3 id="支持厂商"><a href="#支持厂商" class="headerlink" title="支持厂商"></a>支持厂商</h3><h5 id="fission-24"><a href="#fission-24" class="headerlink" title="fission"></a>fission</h5><ul>
<li>Platform9</li>
</ul>
<h5 id="openwhisk-24"><a href="#openwhisk-24" class="headerlink" title="openwhisk"></a>openwhisk</h5><ul>
<li>Apache/IBM</li>
</ul>
<h2 id="底层基础设施对接层面"><a href="#底层基础设施对接层面" class="headerlink" title="底层基础设施对接层面"></a>底层基础设施对接层面</h2><h3 id="组建部署方式"><a href="#组建部署方式" class="headerlink" title="组建部署方式"></a>组建部署方式</h3><h5 id="fission-25"><a href="#fission-25" class="headerlink" title="fission"></a>fission</h5><ul>
<li>通过helm部署在kubernetes上</li>
</ul>
<h5 id="openwhisk-25"><a href="#openwhisk-25" class="headerlink" title="openwhisk"></a>openwhisk</h5><ul>
<li>通过 Ansible部署在docker中</li>
</ul>
<h3 id="function部署方式"><a href="#function部署方式" class="headerlink" title="function部署方式"></a>function部署方式</h3><h5 id="fission-26"><a href="#fission-26" class="headerlink" title="fission"></a>fission</h5><ul>
<li>以pod形式运行在kubernetes中</li>
</ul>
<h5 id="openwhisk-26"><a href="#openwhisk-26" class="headerlink" title="openwhisk"></a>openwhisk</h5><ul>
<li>运行在docker中</li>
</ul>
<h4 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h4><ul>
<li><a href="https://fission.io" target="_blank" rel="noopener">https://fission.io</a></li>
<li><a href="https://console.bluemix.net/docs/openwhisk/index.html#cloud-functions-" target="_blank" rel="noopener">https://console.bluemix.net/docs/openwhisk/index.html#cloud-functions-</a></li>
<li><a href="https://www.tuicool.com/articles/6NnEb2b" target="_blank" rel="noopener">https://www.tuicool.com/articles/6NnEb2b</a></li>
<li><a href="https://lingxiankong.github.io/2017-03-05-faas-fission.html" target="_blank" rel="noopener">https://lingxiankong.github.io/2017-03-05-faas-fission.html</a></li>
<li><a href="https://www.kubernetes.org.cn/2523.html" target="_blank" rel="noopener">https://www.kubernetes.org.cn/2523.html</a></li>
<li><a href="https://blog.csdn.net/qq_34463875/article/details/60960244" target="_blank" rel="noopener">https://blog.csdn.net/qq_34463875/article/details/60960244</a></li>
<li><a href="https://www.ibm.com/developerworks/cn/opensource/os-introducing-openwhisk-microservices-made-easy/" target="_blank" rel="noopener">https://www.ibm.com/developerworks/cn/opensource/os-introducing-openwhisk-microservices-made-easy/</a></li>
</ul>

	
	</div>
  <a type="button" href="/2018/04/11/FaaS踩坑之openwhisk与fission对比/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->
<div class="row">
	<div class="col-md-8">
		<h3 class="title">
			<a href="/2018/04/11/FaaS踩坑之openwhisk文档阅读笔记/" >FaaS踩坑之openwhisk文档阅读笔记</a>
		</h3>
		</div>
	<div class="col-md-4">
		<div class="date">post @ 2018-04-11  </div>
		</div>
	</div>
	


			<div class="entry">
  <div class="row">
	
	
		<ul>
<li>FaaS，serverless分布式事件驱动型计算服务，也称为无服务器计算或功能即服务 Function-as-a-Service</li>
<li>计算单元：不是虚拟机，而是一个封装了待执行代码（事件触发）的函数</li>
</ul>
<ul>
<li>yaml：”Yet Another Markup Language”（仍是一种置标语言）</li>
</ul>
<ul>
<li><p>post与get <a href="http://www.w3school.com.cn/tags/html_ref_httpmethods.asp" target="_blank" rel="noopener">http://www.w3school.com.cn/tags/html_ref_httpmethods.asp</a></p>
</li>
<li><p>微服务：一种架构风格，一个大型复杂软件应用由一个或多个微服务组成。系统中的各个微服务可被独立部署，各个微服务之间是松耦合的。每个微服务仅关注于完成一件任务。在所有情况下，每个任务代表着一个小的业务能力。</p>
</li>
<li>反向代理，用于外部网络访问内部网络时使用，正向代理或包过滤方式用于拒绝其他外部访问方式并提供内部网络对外部网络的访问能力。因此可以结合这些方式提供最佳的安全访问方式。</li>
<li>nginx：web服务器</li>
<li><p>Spray：spray is an open-source toolkit for building REST/HTTP-based integration layers on top of Scala and Akka.</p>
</li>
<li><p>Akka：Akka是JAVA虚拟机JVM平台上构建高并发、分布式和容错应用的工具包和运行时。Akka用Scala语言写成，同时提供了Scala和JAVA的开发接口</p>
</li>
<li><p>rest api ：<a href="http://blog.csdn.net/px01ih8/article/details/78674685" target="_blank" rel="noopener">http://blog.csdn.net/px01ih8/article/details/78674685</a></p>
</li>
<li><p>openwhisk：从CouchDB 中的 whisks 数据库装入操作</p>
</li>
<li><p>Scala：一门多范式的编程语言，一种类似java的编程语言，设计初衷是实现可伸缩的语言、并集成面向对象编程和函数式编程的各种特性，Scala 运行在Java虚拟机上，并兼容现有的Java程序。</p>
</li>
</ul>
<ul>
<li><p>Kafka是一种高吞吐量的分布式发布订阅消息系统，它可以处理消费者规模的网站中的所有动作流数据</p>
</li>
<li><p>ActivationId：激活利用特定的标识符来表示远程对象，对象能随着时间被激活。一个激活标识符（类 ActivationID的一个实例）包含了激活一个对象所需的几部分信息：<a href="http://www.oschina.net/uploads/doc/javase-6-doc-api-zh_CN/java/rmi/activation/ActivationID.html" target="_blank" rel="noopener">http://www.oschina.net/uploads/doc/javase-6-doc-api-zh_CN/java/rmi/activation/ActivationID.html</a></p>
</li>
</ul>
<ul>
<li><p>异步调用模型，其中一旦系统接受调用操作的 HTTP 请求后，该请求即会终止</p>
</li>
<li><p>Docker 用于以快速、隔离且受控的方式为我们调用的每个操作设置新的自封装环境（称为容器）。对于每个操作调用，都会衍生一个 Docker 容器，将操作码注入其中</p>
</li>
<li><p>Restful：网络上的所有事物都被抽象为资源，每个资源都有一个唯一的资源标识符，同一个资源具有多种表现形式(xml,json等)，对资源的各种操作不会改变资源标识符，所有的操作都是无状态的</p>
</li>
<li><p>ssl终止：在处理SSL加密/解密的负载均衡器上发生的进程，以便负载均衡器和后端服务器之间的流量处于HTTP中。 后端必须通过限制对负载均衡器的IP的访问来加以保护</p>
</li>
<li><p>Ansible是一个简单的自动化运维管理工具</p>
</li>
<li><p>Cloud Functions 处理流入系统的事件。</p>
</li>
<li><p>触发器在技术上是指某类事件的名称。每个事件属于恰好一个触发器；若用类比说明，触发器类似于基于主题的发布/预订系统中的主题。规则 T -&gt; A 表示“每当来自触发器 T 的事件到达时，通过触发器有效内容调用操作 A。”</p>
</li>
<li><p>订阅源是全部属于某个触发器 T 的事件的流。订阅源通过订阅源操作进行控制，订阅源操作用于处理组成订阅源的事件流的创建、删除、暂停和恢复。通常，订阅源操作通过使用管理通知的 REST API 来与生成事件的外部服务进行交互。</p>
</li>
</ul>

	
	</div>
  <a type="button" href="/2018/04/11/FaaS踩坑之openwhisk文档阅读笔记/#more" class="btn btn-default more">Read More</a>
</div>

		

		</div>

		<!-- pagination -->
		<div>
  		<center>
		<div class="pagination">

   
    
           <a type="button" class="btn btn-default disabled"><i class="fa fa-arrow-circle-o-left"></i>Prev</a>
        

        <a href="/" type="button" class="btn btn-default"><i class="fa fa-home"></i>Home</a>
 
       <a href="/page/2/" type="button" class="btn btn-default ">Next<i class="fa fa-arrow-circle-o-right"></i></a>     
        

  
</div>

  		</center>
		</div>

		
		
	</div> <!-- col-md-9 -->

	
		<div class="col-md-3">
	<div id="sidebar">
	
			
  <div id="site_search">
   <div class="form-group">
    <input type="text" id="local-search-input" name="q" results="0" placeholder="Search" class="st-search-input st-default-search-input form-control"/>
   </div>  
  <div id="local-search-result"></div>
  </div>


		
			
	<div class="widget">
		<h4>Categories</h4>
		<ul class="tag_box inline list-unstyled">
		
			<li><a href="/categories/ActivityNet2017/">ActivityNet2017<span>1</span></a></li>
		
			<li><a href="/categories/FaaS踩坑系列/">FaaS踩坑系列<span>5</span></a></li>
		
			<li><a href="/categories/SqueezeNet/">SqueezeNet<span>2</span></a></li>
		
			<li><a href="/categories/Untrimmed-Video-Classification论文阅读笔记/">Untrimmed_Video_Classification论文阅读笔记<span>2</span></a></li>
		
			<li><a href="/categories/activitynet/">activitynet<span>1</span></a></li>
		
			<li><a href="/categories/git/">git<span>1</span></a></li>
		
		</ul>
	</div>

		
			
	<div class="widget">
		<h4>Tag Cloud</h4>
		<ul class="tag_box inline list-unstyled">		
		
			<li><a href="/tags/CNN/">CNN<span>2</span></a></li>
		
			<li><a href="/tags/ActivityNet2017/">ActivityNet2017<span>1</span></a></li>
		
			<li><a href="/tags/分布式/">分布式<span>1</span></a></li>
		
			<li><a href="/tags/fission/">fission<span>4</span></a></li>
		
			<li><a href="/tags/SqueezeNet/">SqueezeNet<span>2</span></a></li>
		
			<li><a href="/tags/C3D/">C3D<span>1</span></a></li>
		
			<li><a href="/tags/Kubernetes/">Kubernetes<span>1</span></a></li>
		
			<li><a href="/tags/caffee/">caffee<span>1</span></a></li>
		
			<li><a href="/tags/视频处理/">视频处理<span>1</span></a></li>
		
			<li><a href="/tags/Raspberry-Pi/">Raspberry Pi<span>1</span></a></li>
		
			<li><a href="/tags/docker/">docker<span>1</span></a></li>
		
			<li><a href="/tags/averagePooling/">averagePooling<span>1</span></a></li>
		
			<li><a href="/tags/tensorflow/">tensorflow<span>1</span></a></li>
		
			<li><a href="/tags/git/">git<span>1</span></a></li>
		
			<li><a href="/tags/StackedC3D/">StackedC3D<span>1</span></a></li>
		
			<li><a href="/tags/activitynet/">activitynet<span>1</span></a></li>
		
			<li><a href="/tags/helm/">helm<span>1</span></a></li>
		
			<li><a href="/tags/ARM/">ARM<span>1</span></a></li>
		
			<li><a href="/tags/SVM/">SVM<span>1</span></a></li>
		
			<li><a href="/tags/MBH/">MBH<span>1</span></a></li>
		
		
		   <li><a href="/tags">...<span>27</span></a></li>
		 
		</ul>
	</div>


		
			
<div class="widget">
  <h4>Recent Posts</h4>
  <ul class="entry list-unstyled">
    
      <li>
        <a href="/2018/06/07/fission二次测试以及组件日志分析/" ><i class="fa fa-file-o"></i>fission二次测试以及组件日志分析</a>
      </li>
    
      <li>
        <a href="/2018/06/01/SqueezeNet介绍/" ><i class="fa fa-file-o"></i>SqueezeNet介绍</a>
      </li>
    
      <li>
        <a href="/2018/06/01/SqueezeNet的ARM和树莓派案例/" ><i class="fa fa-file-o"></i>SqueezeNet的ARM和树莓派案例</a>
      </li>
    
      <li>
        <a href="/2018/05/20/复现activitynet2016未剪辑视频分类冠军算法模型/" ><i class="fa fa-file-o"></i>复现activitynet2016未剪辑视频分类冠军算...</a>
      </li>
    
      <li>
        <a href="/2018/05/15/CNN_MBH_StackedC3D_ovrSVM_Voting/" ><i class="fa fa-file-o"></i>论文阅读笔记之CNN_MBH_StackedC3D_o...</a>
      </li>
    
  </ul>
</div>

		
			
<div class="widget">
	<h4>Links</h4>
	<ul class="blogroll list-unstyled">
	
		<li><i class="fa fa-github"></i><a href="http://www.github.com/0rainge" title="My Github account." target="_blank"]);">My Github</a></li>
	
	</ul>
</div>


		
	</div> <!-- sidebar -->
</div> <!-- col-md-3 -->

	
	
</div> <!-- row-fluid -->
	</div>
  </div>
  <div class="container-narrow">
  <footer> <p>
  &copy; 2018 John Doe
  
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a>,<a href="http://github.com/wzpan/hexo-theme-freemind/">Freemind</a>,<a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a> and <a href="http://getbootstrap.com/" target="_blank">BOOTSTRA.386</a>. 
     <br> Theme by <a href="http://github.com/wzpan/hexo-theme-freemind/">Freemind.386</a>.    
</p>
 </footer>
</div> <!-- container-narrow -->
  


  
<a id="gotop" href="#">   
  <span>⬆︎TOP</span>
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/search.js"></script> 


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



</body>
   </html>
